<!DOCTYPE html>
<html lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bruh</title>
    <script src="node_modules/phaser/dist/phaser.min.js"></script>
    <link rel="stylesheet" href="style.css" />
    <script src="main.js"></script>
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: Arial, sans-serif;
      }
      #start-screen {
        position: absolute;
        width: 100%;
        height: 100%;
        background: #87ceeb;
        text-align: center;
        z-index: 900;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
      }
      #start-screen-text {
        font-size: 50px;
        color: black;
        position: absolute;
        top: 90%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 1000;
        animation: pulse 1.5s infinite ease-in-out;
      }
      #start-screen-text:hover {
        color: lightblue;
      }
      #game-screen {
        display: none;
        position: relative;
        width: 100%;
        height: 100vh;
      }
      @keyframes pulse {
        0% {
          transform: translate(-50%, -50%) scale(1);
        }
        50% {
          transform: translate(-50%, -50%) scale(1.5);
        }
        100% {
          transform: translate(-50%, -50%) scale(1);
        }
      }
      @keyframes pulse2 {
        0% {
          transform: translate(-50%, -50%) scale(1);
        }
        50% {
          transform: translate(-50%, -50%) scale(1.05);
        }
        100% {
          transform: translate(-50%, -50%) scale(1);
        }
      }
      .screen-header {
        text-align: center;
        color: black;
        font-weight: bold;
        font-size: 45px;
        border: 2px solid black;
        padding: 10px;
        background-color: lightblue;
      }
      .character-button,
      .difficulty-button {
        background-color: lightblue;
        width: 300px;
        height: 300px;
        border: 2px solid black;
        font-weight: bold;
        color: black;
        text-align: center;
        position: absolute;
        top: 55%;
        animation: pulse2 1.5s infinite ease-in-out;
      }
      .character-button {
        font-size: 20px;
      }
      .difficulty-button {
        font-size: 35px;
      }
      #mini-map {
        display: none;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        z-index: 9999;
        border: none;
      }
      #mini-river {
        position: absolute;
        width: 30px;
        height: 120%;
        background: lightblue;
        transform: rotate(68.75deg);
        top: 25%;
        right: 10%;
        transform-origin: top right;
        border-radius: 5px;
        z-index: 1001;
      }
      #mini-bridge {
        position: absolute;
        width: 10px;
        height: 30px;
        background-color: tan;
        transform: rotate(158.75deg);
        top: 60%;
        left: 60%;
        border-radius: 3px;
        z-index: 1002;
      }
      .inventory {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        z-index: 1000;
        align-items: center;
        justify-content: center;
      }
      .inventory-title {
        font-size: 75px;
        font-weight: bold;
        text-align: center;
        margin-top: 60px;
        margin-bottom: 20px;
        color: #ffde7d;
        text-shadow: 1px 1px 2px #000;
      }
      .inventory-grid {
        display: grid;
        grid-template-columns: repeat(6, 1fr);
        grid-gap: 50px;
        justify-items: center;
        align-items: center;
        background-color: #333;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
      }
      .inventory-slot {
        width: 180px;
        height: 180px;
        background: #1b1b1b;
        border: 2px solid #5c3d24;
        border-radius: 5px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: transform 0.2s, border-color 0.2s;
      }
      .inventory-slot:hover {
        transform: scale(1.1);
        border-color: #ffde7d;
      }
      .inventory-item {
        width: 50px;
        height: 50px;
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
      }
      #sprite {
        width: 50px;
        height: 70px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: transparent;
        border-radius: 50% 50% 20% 20%;
        z-index: 10;
      }
      #sprite .shirt {
        width: 50px;
        height: 27px;
        background-color: green;
        position: absolute;
        top: 62%;
        left: 50%;
        transform: translateX(-50%);
        border-radius: 0 0 20% 20%;
        z-index: 20;
      }
      #sprite .hat {
        width: 60px;
        height: 75px;
        background-color: red;
        position: absolute;
        top: -30px;
        left: 50%;
        transform: translateX(-50%) rotate(0deg);
        clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
        z-index: 20;
      }
      #sprite .beard {
        width: 45px;
        height: 30px;
        background-color: white;
        border-radius: 50%;
        position: absolute;
        top: 40px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 21;
      }
      #sprite .nose {
        width: 20px;
        height: 20px;
        background-color: #ffb3b3;
        border-radius: 50%;
        position: absolute;
        top: 35px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 22;
      }
      #sprite .left-hand,
      #sprite .right-hand {
        width: 12px;
        height: 20px;
        background-color: #f2d7d5;
        position: absolute;
        top: 45px;
        border-radius: 50%;
        z-index: 23;
      }
      #sprite .left-hand {
        left: -10px;
      }
      #sprite .right-hand {
        right: -10px;
      }
      #sprite .left-foot,
      #sprite .right-foot {
        width: 15px;
        height: 10px;
        background-color: #3d3d3d;
        position: absolute;
        bottom: -10px;
        z-index: 19;
      }
      #sprite .left-foot {
        left: 5px;
      }
      #sprite .right-foot {
        right: 5px;
      }
      body {
        margin: 0;
        overflow: hidden;
      }
      #game-container {
        width: 100vw;
        height: 100vh;
        display: grid;
        position: relative;
        overflow: hidden;
      }

      .tile {
        width: 100px; /* Adjust tile size */
        height: 100px;
      }
      .rock {
        position: absolute;
        width: 90px;
        height: 70px;
      }
      .rock .rock-shape {
        width: 100%;
        height: 100%;
        background: linear-gradient(to top left, #8a8a8a, #c0c0c0);
        border-radius: 60% 50% 45% 55%;
        position: absolute;
      }
      .mushroom {
        width: 50px;
        height: 60px;
      }
      .mushroom .cap {
        width: 50px;
        height: 30px;
        background: red;
        border-radius: 50% 50% 0 0;
        position: absolute;
        top: 0;
        z-index: 2;
      }
      .mushroom .stem {
        width: 16px;
        height: 30px;
        background: beige;
        border-radius: 5px;
        position: absolute;
        bottom: 5px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 1;
      }
      .mushroom .spot {
        position: absolute;
        background: beige;
        border-radius: 50%;
        z-index: 3;
      }
      .mushroom .spot.one {
        width: 10px;
        height: 10px;
        top: 5px;
        left: 12px;
      }
      .mushroom .spot.two {
        width: 8px;
        height: 8px;
        top: 14px;
        right: 12px;
      }
      .mushroom .spot.three {
        width: 6px;
        height: 6px;
        top: 18px;
        left: 18px;
      }
      #health-bar-container {
        position: absolute;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        width: 300px;
        height: 20px;
        background: orangered;
        border: 2px solid #000;
        border-radius: 10px;
        z-index: 10;
      }
      #health-bar {
        width: 100%;
        height: 100%;
        background: green;
        border-radius: 8px;
        transition: width 0.3s;
      }
      .bushmonster {
        width: 60px;
        height: 80px;
        background: #3d5c30;
        position: relative;
        border-radius: 30%;
      }
      .body {
        width: 60px;
        height: 80px;
        background: #3d5c30;
        border-radius: 30%;
        position: absolute;
        bottom: 0;
        z-index: 2;
      }
      .head {
        width: 45px;
        height: 45px;
        background: #6a8a46;
        border-radius: 50%;
        position: absolute;
        top: -20px;
        left: 8px;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 3;
      }
      .eye {
        width: 9px;
        height: 9px;
        background: yellow;
        border-radius: 50%;
        position: absolute;
        box-shadow: 0 0 5px yellow;
        z-index: 4;
      }
      .eye.left {
        left: 8px;
      }
      .eye.right {
        right: 8px;
      }
      .arm {
        width: 15px;
        height: 40px;
        background: #6a8a46;
        border-radius: 50%;
        position: absolute;
        top: 20px;
        z-index: 3;
      }
      .arm.left {
        left: -8px;
        transform: rotate(5deg);
      }
      .arm.right {
        right: -8px;
        transform: rotate(-10deg);
      }
      .axe {
        width: 5px;
        height: 25px;
        background: #8b4513;
        position: absolute;
        top: 10px;
        right: -5px;
        transform: rotate(30deg);
      }
      .axe-blade {
        width: 22px;
        height: 15px;
        background: #b0c4de;
        position: absolute;
        top: -5px;
        left: -5px;
        clip-path: polygon(0 0, 100% 50%, 0 100%);
      }
      .leg {
        width: 20px;
        height: 35px;
        background: #6a8a46;
        border-radius: 50%;
        position: absolute;
        bottom: -10px;
        z-index: 1;
      }
      .leg.left {
        left: 8px;
      }
      .leg.right {
        right: 8px;
      }
      .gash {
        width: 20px;
        height: 15px;
        background: #8b0000;
        border-radius: 10px;
        position: absolute;
        top: 8px;
        left: 5px;
        transform: rotate(40deg);
        z-index: 5;
        box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5),
          -2px -2px 5px rgba(0, 0, 0, 0.5);
        clip-path: polygon(
          0 10%,
          40% 0%,
          70% 10%,
          100% 0%,
          80% 20%,
          60% 30%,
          40% 30%,
          20% 20%
        );
      }
      .gash::before {
        content: "";
        width: 2px;
        height: 12px;
        background: #000000;
        position: absolute;
        top: 0;
        left: 8px;
        z-index: 6;
        transform: rotate(20deg);
      }
      .gash::after {
        content: "";
        width: 2px;
        height: 12px;
        background: #000000;
        position: absolute;
        top: 0;
        left: 12px;
        z-index: 6;
        transform: rotate(-20deg);
      }
      .icemonster {
        width: 60px;
        height: 60px;
        background: lightblue;
        background-size: contain;
        position: absolute;
      }
      .yeti {
        width: 80px;
        height: 80px;
        background: darkblue;
        background-size: contain;
        position: absolute;
      }
      .santa {
        width: 100px;
        height: 100px;
        background: red;
        background-size: contain;
        position: absolute;
      }
      .santa-health-bar {
        border: 1px solid black;
        border-radius: 2px;
        background-color: green;
        position: absolute;
        z-index: 10;
      }
      .crab {
        width: 85px;
        height: 85px;
        background: orange;
        background-size: contain;
        position: absolute;
      }
      .deer {
        width: 90px;
        height: 90px;
        background: brown;
        background-size: contain;
        position: absolute;
      }
      .hampsta {
        width: 95px;
        height: 95px;
        background: tan;
        background-size: contain;
        position: absolute;
      }
      .hampsta-health-bar {
        border: 1px solid black;
        border-radius: 2px;
        background-color: green;
        position: absolute;
        z-index: 10;
      }
      .icecrab {
        width: 105px;
        height: 105px;
        background: yellow;
        background-size: contain;
        position: absolute;
      }
      .icecrab-health-bar {
        border: 1px solid black;
        border-radius: 2px;
        background-color: green;
        position: absolute;
        z-index: 10;
      }
      .snowball {
        width: 20px;
        height: 20px;
        background: white;
        border: 2px solid black;
        border-radius: 50%;
        position: absolute;
        z-index: 5;
      }
      #level-container {
        position: absolute;
        top: 50px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 20;
        font-size: 20px;
        font-weight: bold;
        color: white;
        text-align: center;
      }
      #level-text {
        position: absolute;
        top: 5px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 21;
      }
      #level-box {
        width: 150px;
        height: 30px;
        background-color: gray;
        border: 2px solid black;
        border-radius: 10px;
        z-index: 20;
      }
      #home-container {
        position: absolute;
        top: 10px;
        left: 15%;
        transform: translateX(-50%);
        z-index: 20;
        font-size: 15px;
        font-weight: bold;
        color: black;
        text-align: center;
      }
      #home-box {
        width: 100px;
        height: 90px;
        background-color: white;
        border: 2px solid black;
        border-radius: 10px;
        z-index: 20;
      }
      #home-text {
        position: absolute;
        top: 15px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 21;
      }
      #audio-container {
        position: absolute;
        top: 10px;
        left: 85%;
        transform: translateX(-50%);
        z-index: 20;
        font-size: 15px;
        font-weight: bold;
        color: black;
        text-align: center;
      }
      #audio-box {
        width: 100px;
        height: 90px;
        background-color: white;
        border: 2px solid black;
        border-radius: 10px;
        background-size: 60%;
        background-repeat: no-repeat;
        background-position: center;
        z-index: 20;
      }
      #audio-text {
        position: absolute;
        top: 15px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 21;
      }
      @keyframes glow {
        0% {
          text-shadow: 0 0 5px blue, 0 0 10px blue;
        }
        50% {
          text-shadow: 0 0 50px blue, 0 0 55px blue;
        }
        100% {
          text-shadow: 0 0 5px blue, 0 0 10px blue;
        }
      }
      .glowing {
        animation: glow 1s ease-in-out infinite;
      }
      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
      .spin {
        animation: spin 1s linear infinite;
      }
      .pressed {
        padding: 4px;
        box-shadow: inset 0 2px 5px black;
        transition: transform 0.1s, box-shadow 0.1s;
      }
      #actionButtonContainer {
        position: absolute;
        display: none;
        z-index: 9999;
        background: #1b1b1b;
        padding: 10px;
        border-radius: 5px;
      }
      .action-button {
        width: 100px;
        height: 40px;
        margin: 5px 0;
        background-color: #ffcc00;
        color: white;
        border: 2px solid #d4a500;
        font-family: "Arial", sans-serif;
        font-size: 14px;
        text-align: center;
        cursor: pointer;
        border-radius: 5px;
        box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.6);
        display: block;
      }
      .action-button:hover {
        background-color: #ff9900;
      }
    </style>
  </head>
  <body>
    <audio id="background-music" loop>
      <source src="background-music.mp3" type="audio/mp3" />
    </audio>
    <div id="start-screen">
      <div id="title">
        <h1>Gnome Home</h1>
      </div>
      <div id="start-screen-text">▷</div>
    </div>
    <div id="character-screen" style="display: none">
      <h2 class="screen-header">Select Gnome</h2>
      <button id="red-gnome" class="character-button" style="left: 20%">
        Red Gnome
      </button>
      <button id="blue-gnome" class="character-button" style="left: 50%">
        Blue Gnome
      </button>
      <button id="green-gnome" class="character-button" style="left: 80%">
        Green Gnome
      </button>
    </div>
    <div id="difficultySelectionScreen" style="display: none">
      <h2 class="screen-header">Select Difficulty</h2>
      <button id="easyButton" class="difficulty-button" style="left: 20%">
        Easy
      </button>
      <button id="mediumButton" class="difficulty-button" style="left: 50%">
        Medium
      </button>
      <button id="hardButton" class="difficulty-button" style="left: 80%">
        Hard
      </button>
    </div>
    <div id="game-screen" style="display: none">
      <div id="mini-map">
        <div id="mini-river"></div>
        <div id="mini-bridge"></div>
      </div>
      <div id="inventory" class="inventory">
        <div class="inventory-title">Inventory</div>
        <div class="inventory-grid"></div>
      </div>
      <div id="game-container">
        <script>
          const color1 = "#32a852"; // Green
          const color2 = "#a0522d"; // Brown
          const color3 = "#1e90ff"; // Blue
          const color4 = "#ff0000"; // Red

          // Terrain map
          const terrainMap = [
            [
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
            ],
            [
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
            ],
            [
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
            ],
            [
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
            ],
            [
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
            ],
            [
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
            ],
            [
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
            ],
            [
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
            ],
            [
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
            ],
            [
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
            ],
            [
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
              color1,
            ],
          ];

          const gameContainer = document.getElementById("game-container");

          // Set grid styles based on map size
          gameContainer.style.gridTemplateColumns = `repeat(${terrainMap[0].length}, 100px)`;
          gameContainer.style.gridTemplateRows = `repeat(${terrainMap.length}, 100px)`;

          // Generate tiles
          for (let row = 0; row < terrainMap.length; row++) {
            for (let col = 0; col < terrainMap[row].length; col++) {
              const tile = document.createElement("div");
              tile.classList.add("tile");
              tile.style.backgroundColor = terrainMap[row][col];
              gameContainer.appendChild(tile);
            }
          }
        </script>
        <div id="health-bar-container">
          <div id="health-bar"></div>
        </div>
        <div id="level-container">
          <div id="level-box"></div>
          <div id="level-text">Level 1</div>
        </div>
        <div onclick="restart()" id="home-container">
          <div id="home-box"></div>
          <div id="home-text"></div>
        </div>
        <div id="audio-container">
          <div id="audio-box"></div>
          <div id="audio-text"></div>
        </div>
        <div id="sprite"></div>
        <div id="santaHealthBar"></div>
        <div id="hampstaHealthBar"></div>
        <div id="icecrabHealthBar"></div>
      </div>
      <!-- End of cleaned up code -->
      <script>
        function restart() {
          window.location.reload();
        }
        let snowmanType = "";
        const sprite = document.getElementById("sprite");
        const healthBar = document.getElementById("health-bar");
        const levelText = document.getElementById("level-text");
        const snowballSpeed = 3;
        const bushmonsterSpeed = 1;
        const icemonsterSpeed = 2;
        const yetiSpeed = 1;
        const deerSpeed = 3;
        const santaSpeed = 2;
        const crabSpeed = 5;
        const hampstaSpeed = 1;
        const icecrabSpeed = 2;
        const santaHealthBar = document.createElement("div");
        const hampstaHealthBar = document.createElement("div");
        const icecrabHealthBar = document.createElement("div");
        let spriteHealth = 100;
        let coinCount = 0;
        let currentDirection = "down";
        let firstBushmonsterDamaged = false;
        function reduceSpriteHealth(amount) {
          spriteHealth = Math.max(0, spriteHealth - amount);
          healthBar.style.width = `${spriteHealth}%`;
        }
        function increaseSpriteHealth(amount) {
          spriteHealth = Math.min(100, spriteHealth + amount);
          healthBar.style.width = `${spriteHealth}%`;
        }
        function getMonsterSpeed(type) {
          switch (type) {
            case "yeti":
              return yetiSpeed;
            case "deer":
              return deerSpeed;
            case "icemonster":
              return icemonsterSpeed;
            case "bushmonster":
              return bushmonsterSpeed;
            case "santa":
              return santaSpeed;
            case "crab":
              return crabSpeed;
            case "hampsta":
              return hampstaSpeed;
            case "icecrab":
              return icecrabSpeed;
            default:
              return bushmonsterSpeed;
          }
        }
        function createBushmonster(x, y) {
          const bushmonster = document.createElement("div");
          bushmonster.classList.add("bushmonster");
          bushmonster.style.position = "absolute";
          bushmonster.style.top = `${y}px`;
          bushmonster.style.left = `${x}px`;
          bushmonster.health = 1;
          bushmonster.speed = getMonsterSpeed("bushmonster");

          const body = document.createElement("div");
          body.classList.add("body");
          bushmonster.appendChild(body);

          const leftLeg = document.createElement("div");
          leftLeg.classList.add("leg", "left");
          bushmonster.appendChild(leftLeg);

          const rightLeg = document.createElement("div");
          rightLeg.classList.add("leg", "right");
          bushmonster.appendChild(rightLeg);

          const head = document.createElement("div");
          head.classList.add("head");
          bushmonster.appendChild(head);

          const leftEye = document.createElement("div");
          leftEye.classList.add("eye", "left");
          head.appendChild(leftEye);

          const rightEye = document.createElement("div");
          rightEye.classList.add("eye", "right");
          head.appendChild(rightEye);

          const leftArm = document.createElement("div");
          leftArm.classList.add("arm", "left");
          bushmonster.appendChild(leftArm);

          const rightArm = document.createElement("div");
          rightArm.classList.add("arm", "right");

          const axe = document.createElement("div");
          axe.classList.add("axe");
          const axeBlade = document.createElement("div");
          axeBlade.classList.add("axe-blade");
          axe.appendChild(axeBlade);

          rightArm.appendChild(axe);
          bushmonster.appendChild(rightArm);

          const gash = document.createElement("div");
          gash.classList.add("gash");
          head.appendChild(gash);

          document.body.appendChild(bushmonster);
        }

        function createIceMonster(x, y) {
          const iceMonster = document.createElement("div");
          iceMonster.classList.add("icemonster");
          iceMonster.style.position = "absolute";
          iceMonster.style.top = `${y}px`;
          iceMonster.style.left = `${x}px`;
          iceMonster.health = 1;
          iceMonster.speed = getMonsterSpeed("icemonster");
          document.body.appendChild(iceMonster);
        }
        function createYeti(x, y) {
          const yeti = document.createElement("div");
          yeti.classList.add("yeti");
          yeti.style.position = "absolute";
          yeti.style.top = `${y}px`;
          yeti.style.left = `${x}px`;
          yeti.health = 1;
          yeti.speed = getMonsterSpeed("yeti");
          document.body.appendChild(yeti);
        }
        function createDeer(x, y) {
          const deer = document.createElement("div");
          deer.classList.add("deer");
          deer.style.position = "absolute";
          deer.style.top = `${y}px`;
          deer.style.left = `${x}px`;
          deer.health = 1;
          deer.speed = getMonsterSpeed("deer");
          document.body.appendChild(deer);
        }
        function createSanta(x, y) {
          const santa = document.createElement("div");
          santa.classList.add("santa");
          santa.style.position = "absolute";
          santa.style.top = `${y}px`;
          santa.style.left = `${x}px`;
          santa.health = 9;
          santa.speed = getMonsterSpeed("santa");
          document.body.appendChild(santa);
          const santaHealthBar = document.createElement("div");
          santaHealthBar.classList.add("santa-health-bar");
          santaHealthBar.style.width = "88px";
          santaHealthBar.style.height = "5px";
          santaHealthBar.style.position = "absolute";
          santaHealthBar.style.top = `${y - 10}px`;
          santaHealthBar.style.left = `${x}px`;
          santaHealthBar.dataset.santaId = "santa-health";
          document.body.appendChild(santaHealthBar);
        }
        function createCrab(x, y) {
          const crab = document.createElement("div");
          crab.classList.add("crab");
          crab.style.position = "absolute";
          crab.style.top = `${y}px`;
          crab.style.left = `${x}px`;
          crab.health = 1;
          crab.speed = getMonsterSpeed("crab");
          document.body.appendChild(crab);
        }
        function createHampsta(x, y) {
          const hampsta = document.createElement("div");
          hampsta.classList.add("hampsta");
          hampsta.style.position = "absolute";
          hampsta.style.top = `${y}px`;
          hampsta.style.left = `${x}px`;
          hampsta.health = 8;
          hampsta.speed = getMonsterSpeed("hampsta");
          document.body.appendChild(hampsta);
          const hampstaHealthBar = document.createElement("div");
          hampstaHealthBar.classList.add("hampsta-health-bar");
          hampstaHealthBar.style.width = "88px";
          hampstaHealthBar.style.height = "5px";
          hampstaHealthBar.style.position = "absolute";
          hampstaHealthBar.style.top = `${y - 10}px`;
          hampstaHealthBar.style.left = `${x}px`;
          hampstaHealthBar.dataset.hampstaId = "hampsta-health";
          document.body.appendChild(hampstaHealthBar);
        }
        function createIcecrab(x, y) {
          const icecrab = document.createElement("div");
          icecrab.classList.add("icecrab");
          icecrab.style.position = "absolute";
          icecrab.style.top = `${y}px`;
          icecrab.style.left = `${x}px`;
          icecrab.health = 7;
          icecrab.speed = getMonsterSpeed("icecrab");
          document.body.appendChild(icecrab);
          const icecrabHealthBar = document.createElement("div");
          icecrabHealthBar.classList.add("icecrab-health-bar");
          icecrabHealthBar.style.width = "108px";
          icecrabHealthBar.style.height = "5px";
          icecrabHealthBar.style.position = "absolute";
          icecrabHealthBar.style.top = `${y - 10}px`;
          icecrabHealthBar.style.left = `${x}px`;
          icecrabHealthBar.dataset.icecrabId = "icecrab-health";
          document.body.appendChild(icecrabHealthBar);
        }
        function fireSnowball(direction) {
          const snowball = document.createElement("div");
          snowball.classList.add("snowball");
          document.body.appendChild(snowball);
          const spriteRect = sprite.getBoundingClientRect();
          snowball.style.top = `${
            sprite.offsetTop + sprite.offsetHeight / -1200
          }px`;
          snowball.style.left = `${
            sprite.offsetLeft + sprite.offsetWidth / -1200
          }px`;
          snowball.style.bottom = `${
            sprite.offsetBottom + sprite.offsetHeight / -1200
          }px`;
          snowball.style.right = `${
            sprite.offsetRight + sprite.offsetWidth / -1200
          }px`;
          let snowballSpeed = 3;
          const snowballInterval = setInterval(() => {
            switch (direction) {
              case "up":
                snowball.style.top = `${snowball.offsetTop - snowballSpeed}px`;
                break;
              case "down":
                snowball.style.top = `${snowball.offsetTop + snowballSpeed}px`;
                break;
              case "left":
                snowball.style.left = `${
                  snowball.offsetLeft - snowballSpeed
                }px`;
                break;
              case "right":
                snowball.style.left = `${
                  snowball.offsetLeft + snowballSpeed
                }px`;
                break;
            }
            snowballRect = snowball.getBoundingClientRect();
            const monsters = document.querySelectorAll(
              ".bushmonster, .icemonster, .yeti, .deer, .santa, .crab, .hampsta, .icecrab"
            );
            monsters.forEach((monster) => {
              const monsterRect = monster.getBoundingClientRect();
              if (
                snowballRect.right > monsterRect.left &&
                snowballRect.left < monsterRect.right &&
                snowballRect.bottom > monsterRect.top &&
                snowballRect.top < monsterRect.bottom
              ) {
                snowball.remove();
                if (monster.classList.contains("bushmonster")) {
                  monster.health = monster.health - 1;
                } else if (monster.classList.contains("icemonster")) {
                  monster.health = monster.health - 1;
                } else if (monster.classList.contains("yeti")) {
                  monster.health = monster.health - 1;
                } else if (monster.classList.contains("deer")) {
                  monster.health = monster.health - 1;
                } else if (monster.classList.contains("crab")) {
                  monster.health = monster.health - 1;
                } else if (monster.classList.contains("hampsta")) {
                  monster.health = monster.health - 2;
                  const hampstaHealthBar = document.querySelector(
                    `[data-hampsta-id="hampsta-health"]`
                  );
                  if (hampstaHealthBar) {
                    hampstaHealthBar.style.width = `${10 * monster.health}px`;
                  }
                } else if (monster.classList.contains("santa")) {
                  monster.health = monster.health - 2;
                  const santaHealthBar = document.querySelector(
                    `[data-santa-id="santa-health"]`
                  );
                  if (santaHealthBar) {
                    santaHealthBar.style.width = `${10 * monster.health}px`;
                  }
                } else if (monster.classList.contains("icecrab")) {
                  monster.health = monster.health - 2.5;
                  const icecrabHealthBar = document.querySelector(
                    `[data-icecrab-id="icecrab-health"]`
                  );
                  if (icecrabHealthBar) {
                    icecrabHealthBar.style.width = `${10 * monster.health}px`;
                  }
                }
                if (monster.health <= 0) {
                  monster.remove();
                  if (santaHealthBar) santaHealthBar.remove();
                  if (hampstaHealthBar) hampstaHealthBar.remove();
                  if (icecrabHealthBar) icecrabHealthBar.remove();
                }
              }
            });
            if (
              snowballRect.bottom < 0 ||
              snowballRect.top > window.innerHeight ||
              snowballRect.right < 0 ||
              snowballRect.left > window.innerWidth
            ) {
              snowball.remove();
              clearInterval(snowballInterval);
            }
          }, 10);
        }
        document.addEventListener("keydown", (event) => {
          const spriteRect = sprite.getBoundingClientRect();
          const containerRect = document.body.getBoundingClientRect();
          const step = 10;
          switch (event.key) {
            case "ArrowUp": {
              const newTop = sprite.offsetTop - step;

              sprite.style.top = `${newTop}px`;
              currentDirection = "up";

              break;
            }
            case "ArrowDown": {
              const newTop = sprite.offsetTop + step;

              sprite.style.top = `${newTop}px`;
              currentDirection = "down";

              break;
            }
            case "ArrowLeft": {
              const newLeft = sprite.offsetLeft - step;

              sprite.style.left = `${newLeft}px`;
              currentDirection = "left";

              break;
            }
            case "ArrowRight": {
              const newLeft = sprite.offsetLeft + step;

              sprite.style.left = `${newLeft}px`;
              currentDirection = "right";

              break;
            }
            case "y":
              if (snowmanType === "blue") {
                fireSnowball(currentDirection);
              } else if (snowmanType === "green") {
                fireSnowball(currentDirection);
              } else if (snowmanType === "red") {
                fireSnowball(currentDirection);
              }
              break;
          }
        });
        function moveMonsters() {
          const sprite = document.getElementById("sprite");
          const spriteRect = sprite.getBoundingClientRect();
          const monsters = document.querySelectorAll(
            ".bushmonster, .icemonster, .yeti, .deer, .santa, .crab, .hampsta, .icecrab"
          );
          monsters.forEach((monster) => {
            const monsterRect = monster.getBoundingClientRect();
            let santaHealthBar = null;
            let hampstaHealthBar = null;
            let icecrabHealthBar = null;
            if (monster.classList.contains("santa")) {
              santaHealthBar = document.querySelector(
                `[data-santa-id="santa-health"]`
              );
            }
            if (monster.classList.contains("hampsta")) {
              hampstaHealthBar = document.querySelector(
                `[data-hampsta-id="hampsta-health"]`
              );
            }
            if (monster.classList.contains("icecrab")) {
              icecrabHealthBar = document.querySelector(
                `[data-icecrab-id="icecrab-health"]`
              );
            }
            const angle = Math.atan2(
              spriteRect.top - monsterRect.top,
              spriteRect.left - monsterRect.left
            );
            const currentTop = parseFloat(window.getComputedStyle(monster).top);
            const currentLeft = parseFloat(
              window.getComputedStyle(monster).left
            );
            const speed = monster.speed || 0;
            monster.style.top = `${currentTop + speed * Math.sin(angle)}px`;
            monster.style.left = `${currentLeft + speed * Math.cos(angle)}px`;
            if (santaHealthBar) {
              santaHealthBar.style.top = `${monster.offsetTop - 10}px`;
              santaHealthBar.style.left = `${monster.offsetLeft}px`;
            }
            if (hampstaHealthBar) {
              hampstaHealthBar.style.top = `${monster.offsetTop - 10}px`;
              hampstaHealthBar.style.left = `${monster.offsetLeft}px`;
            }
            if (icecrabHealthBar) {
              icecrabHealthBar.style.top = `${monster.offsetTop - 10}px`;
              icecrabHealthBar.style.left = `${monster.offsetLeft}px`;
            }
            if (
              monsterRect.right > spriteRect.left &&
              monsterRect.left < spriteRect.right &&
              monsterRect.bottom > spriteRect.top &&
              monsterRect.top < spriteRect.bottom
            ) {
              if (monster.classList.contains("bushmonster")) {
                reduceSpriteHealth(1);
              } else if (monster.classList.contains("icemonster")) {
                reduceSpriteHealth(3);
              } else if (monster.classList.contains("yeti")) {
                reduceSpriteHealth(5);
              } else if (monster.classList.contains("deer")) {
                reduceSpriteHealth(10);
              } else if (monster.classList.contains("santa")) {
                reduceSpriteHealth(25);
              } else if (monster.classList.contains("crab")) {
                reduceSpriteHealth(8);
              } else if (monster.classList.contains("hampsta")) {
                reduceSpriteHealth(12);
              } else if (monster.classList.contains("icecrab")) {
                reduceSpriteHealth(10);
              }
              monster.remove();
              if (santaHealthBar) santaHealthBar.remove();
              if (hampstaHealthBar) hampstaHealthBar.remove();
              if (icecrabHealthBar) icecrabHealthBar.remove();
            }
          });
        }
        function getRandomPosition() {
          const x = Math.floor(Math.random() * (window.innerWidth - 50));
          const y = Math.floor(Math.random() * (window.innerHeight - 50));
          return { x, y };
        }
        function createFirstAidKit() {
          const { x, y } = getRandomPosition();
          const firstAidKit = document.createElement("div");
          firstAidKit.style.background = "white";
          firstAidKit.style.position = "absolute";
          firstAidKit.style.width = "50px";
          firstAidKit.style.height = "35px";
          firstAidKit.style.border = "1px solid black";
          firstAidKit.style.borderRadius = "5px";
          firstAidKit.style.left = `${x}px`;
          firstAidKit.style.top = `${y}px`;
          firstAidKit.style.zIndex = "1";
          firstAidKit.classList.add("first-aid-kit");
          const cross = document.createElement("div");
          cross.style.position = "absolute";
          cross.style.background = "red";
          cross.style.width = "25px";
          cross.style.height = "25px";
          cross.style.left = "50%";
          cross.style.top = "50%";
          cross.style.transform = "translate(-50%, -50%)";
          cross.style.clipPath =
            "polygon(30% 0%, 70% 0%, 70% 30%, 100% 30%, 100% 70%, 70% 70%, 70% 100%, 30% 100%, 30% 70%, 0% 70%, 0% 30%, 30% 30%)";
          firstAidKit.appendChild(cross);
          document.body.appendChild(firstAidKit);
        }
        function checkCollision(element1, element2) {
          const rect1 = element1.getBoundingClientRect();
          const rect2 = element2.getBoundingClientRect();
          return !(
            rect1.right < rect2.left ||
            rect1.left > rect2.right ||
            rect1.bottom < rect2.top ||
            rect1.top > rect2.bottom
          );
        }
        setInterval(() => {
          const sprite = document.querySelector("#sprite");
          const firstAidKits = document.querySelectorAll(".first-aid-kit");
          const coins = document.querySelectorAll(".coin");
          firstAidKits.forEach((firstAidKit) => {
            if (checkCollision(sprite, firstAidKit)) {
              firstAidKit.remove();
              collectFirstAidKit();
            }
          });
          coins.forEach((coin) => {
            if (checkCollision(sprite, coin)) {
              coin.remove();
              collectCoin();
            }
          });
        }, 100);
        function createCoin() {
          const { x, y } = getRandomPosition();
          const coin = document.createElement("div");
          coin.style.background = "yellow";
          coin.style.position = "absolute";
          coin.style.width = "30px";
          coin.style.height = "30px";
          coin.style.borderRadius = "50%";
          coin.style.border = "1px solid black";
          coin.style.left = `${x}px`;
          coin.style.top = `${y}px`;
          coin.style.zIndex = "1";
          coin.classList.add("coin", "spin");
          const star = document.createElement("div");
          star.style.position = "absolute";
          star.style.top = "50%";
          star.style.left = "50%";
          star.style.transform = "translate(-50%, -50%)";
          star.style.width = "20px";
          star.style.height = "20px";
          star.style.background = "orange";
          star.style.clipPath =
            "polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)";
          star.style.zIndex = "2";
          coin.appendChild(star);
          document.body.appendChild(coin);
          setTimeout(() => {
            coin.classList.remove("spin");
          }, 1000);
        }

        const homeBox = document.getElementById("home-container");
        const aBox = document.getElementById("audio-container");
        const redBox = document.getElementById("red-gnome");
        const blueBox = document.getElementById("blue-gnome");
        const greenBox = document.getElementById("green-gnome");
        const easyButton = document.getElementById("easyButton");
        const mediumButton = document.getElementById("mediumButton");
        const hardButton = document.getElementById("hardButton");
        function addPressedEffect(element) {
          element.addEventListener("mousedown", () => {
            element.classList.add("pressed");
          });
          element.addEventListener("mouseup", () => {
            setTimeout(() => {
              element.classList.remove("pressed");
            }, 100);
          });
          element.addEventListener("mouseleave", () => {
            element.classList.remove("pressed");
          });
        }
        addPressedEffect(homeBox);
        addPressedEffect(aBox);
        addPressedEffect(redBox);
        addPressedEffect(blueBox);
        addPressedEffect(greenBox);
        addPressedEffect(easyButton);
        addPressedEffect(mediumButton);
        addPressedEffect(hardButton);
      </script>
    </div>
  </body>
  <script>
    const startScreen = document.getElementById("start-screen");
    const startText = document.getElementById("start-screen-text");
    const gameScreen = document.getElementById("game-screen");
    const characterScreen = document.getElementById("character-screen");
    startText.addEventListener("click", () => {
      startScreen.style.display = "none";
      characterScreen.style.display = "block";
    });
    document.addEventListener("DOMContentLoaded", function () {
      function selectDifficulty(difficulty) {
        selectedDifficulty = difficulty;
        if (selectedDifficulty === "easy") {
          difficultySelectionScreen.style.display = "none";
          startGameEasy();
        } else if (selectedDifficulty === "medium") {
          difficultySelectionScreen.style.display = "none";
          startGameMedium();
        } else if (selectedDifficulty === "hard") {
          difficultySelectionScreen.style.display = "none";
          startGameHard();
        }
      }
      document.getElementById("blue-gnome").addEventListener("click", () => {
        selectGnome("blue");
      });
      document.getElementById("red-gnome").addEventListener("click", () => {
        selectGnome("red");
      });
      document.getElementById("green-gnome").addEventListener("click", () => {
        selectGnome("green");
      });
      easyButton.addEventListener("click", () => selectDifficulty("easy"));
      mediumButton.addEventListener("click", () => selectDifficulty("medium"));
      hardButton.addEventListener("click", () => selectDifficulty("hard"));
      function selectGnome(selected) {
        snowmanType = selected;
        const characterScreen = document.getElementById("character-screen");
        const difficultySelectionScreen = document.getElementById(
          "difficultySelectionScreen"
        );
        characterScreen.style.display = "none";
        difficultySelectionScreen.style.display = "block";
        sprite.innerHTML = "";
        const shirt = document.createElement("div");
        shirt.classList.add("shirt");
        if (snowmanType === "blue") {
          shirt.style.backgroundColor = "blue";
        } else if (snowmanType === "red") {
          shirt.style.backgroundColor = "green";
        } else {
          shirt.style.backgroundColor = "red";
        }
        sprite.appendChild(shirt);
        const hat = document.createElement("div");
        hat.classList.add("hat");
        if (snowmanType === "blue") {
          hat.style.backgroundColor = "red";
        } else if (snowmanType === "green") {
          hat.style.backgroundColor = "green";
        } else {
          hat.style.backgroundColor = "red";
        }
        sprite.appendChild(hat);
        const beard = document.createElement("div");
        beard.classList.add("beard");
        sprite.appendChild(beard);
        const nose = document.createElement("div");
        nose.classList.add("nose");
        sprite.appendChild(nose);
        const leftHand = document.createElement("div");
        leftHand.classList.add("left-hand");
        sprite.appendChild(leftHand);
        const rightHand = document.createElement("div");
        rightHand.classList.add("right-hand");
        sprite.appendChild(rightHand);
        const leftFoot = document.createElement("div");
        leftFoot.classList.add("left-foot");
        sprite.appendChild(leftFoot);
        const rightFoot = document.createElement("div");
        rightFoot.classList.add("right-foot");
        sprite.appendChild(rightFoot);
      }
      function startGameEasy() {
        const gameScreen = document.getElementById("game-screen");
        gameScreen.style.display = "block";
        spawn();
      }
      function startGameMedium() {
        const gameScreen = document.getElementById("game-screen");
        gameScreen.style.display = "block";
        spawn();
      }
      function startGameHard() {
        const gameScreen = document.getElementById("game-screen");
        gameScreen.style.display = "block";
        spawn();
      }
    });
    const audioElement = document.getElementById("background-music");
    const audioBox = document.getElementById("audio-box");
    let isMuted = false;
    audioElement.play();
    audioBox.addEventListener("click", () => {
      if (isMuted) {
        audioElement.play();
        isMuted = false;
      } else {
        audioElement.pause();
        isMuted = true;
      }
    });
    const fullScreenMap = document.getElementById("mini-map");
    const miniSprite = document.createElement("div");
    miniSprite.id = "mini-sprite";
    miniSprite.style.position = "absolute";
    miniSprite.style.width = "20px";
    miniSprite.style.height = "20px";
    miniSprite.style.backgroundColor = "red";
    miniSprite.style.borderRadius = "50%";
    fullScreenMap.appendChild(miniSprite);
    let isMapOpen = false;
    let gamePaused = false;
    let gameLoopId = null;
    const activeMonsterIntervals = [];
    const activeTimeouts = [];
    function trackedTimeout(callback, delay) {
      const timeoutId = setTimeout(callback, delay);
      activeTimeouts.push(timeoutId);
      return timeoutId;
    }
    function clearAllTimeouts() {
      activeTimeouts.forEach((timeoutId) => clearTimeout(timeoutId));
      activeTimeouts.length = 0;
    }
    function stopMonsterMovement() {
      const monsters = document.querySelectorAll(
        ".bushmonster, .icemonster, .yeti, .deer, .santa, .crab, .hampsta, .icecrab"
      );
      monsters.forEach((monster) => {
        if (monster.dataset.movementInterval) {
          clearInterval(monster.dataset.movementInterval);
          monster.dataset.movementInterval = null;
        }
      });
      clearInterval(monsterMovementInterval);
    }
    function pauseGame() {
      if (gamePaused) return;
      gamePaused = true;
      stopMonsterMovement();
      if (gameLoopId) {
        cancelAnimationFrame(gameLoopId);
        gameLoopId = null;
      }
    }
    function resumeMonsterMovement() {
      monsterMovementInterval = setInterval(moveMonsters, 100);
    }
    function resumeGame() {
      if (!gamePaused) return;
      gamePaused = false;
      resumeMonsterMovement();
      if (!gameLoopId) {
        gameLoop();
      }
    }
    document.addEventListener("keydown", (event) => {
      if (event.key === "l") {
        if (!isMapOpen) {
          fullScreenMap.style.display = "block";
          updateFullScreenMap();
          pauseGame();
          isMapOpen = true;
        }
      } else if (event.key === "b") {
        if (isMapOpen) {
          fullScreenMap.style.display = "none";
          resumeGame();
          isMapOpen = false;
        }
      }
    });
    function updateFullScreenMap() {
      const spriteRect = sprite.getBoundingClientRect();
      const containerRect = gameContainer.getBoundingClientRect();
      const scaleX = fullScreenMap.clientWidth / containerRect.width;
      const scaleY = fullScreenMap.clientHeight / containerRect.height;
      const leftPosition = (spriteRect.left - containerRect.left) * scaleX;
      const topPosition = (spriteRect.top - containerRect.top) * scaleY;
      miniSprite.style.left = `${leftPosition}px`;
      miniSprite.style.top = `${topPosition}px`;
    }
    let gameStarted = false;
    function spawn() {
      trackedTimeout(() => createBushmonster(50, 50), 0);
      trackedTimeout(() => {
        createBushmonster(0, 0);
        createBushmonster(window.innerWidth - 50, 0);
        createBushmonster(0, window.innerHeight - 50);
        createBushmonster(window.innerWidth - 50, window.innerHeight - 50);
      }, 10000);
      trackedTimeout(() => {
        createBushmonster(window.innerWidth / 2 - 25, 0);
        createBushmonster(window.innerWidth / 2 - 25, window.innerHeight - 50);
      }, 15000);
      trackedTimeout(() => {
        createIceMonster(
          window.innerWidth / 8 - 35,
          window.innerHeight / 2 - 32
        );
        createIceMonster(
          (window.innerWidth * 7) / 8 - 35,
          window.innerHeight / 2 - 32
        );
      }, 20000);
      let level = 1;
      trackedTimeout(() => {
        createFirstAidKit();
        createCoin();
      }, 10000);
      trackedTimeout(() => {
        levelText.innerHTML = `Level 2`;
        createCoin();
      }, 20000);
      trackedTimeout(() => {
        createFirstAidKit();
        createCoin();
      }, 30000);
      trackedTimeout(() => {
        levelText.innerHTML = "Level 3";
        createCoin();
      }, 40000);
      trackedTimeout(() => {
        createFirstAidKit();
        createCoin();
      }, 50000);
      trackedTimeout(() => {
        levelText.innerHTML = "Level 4";
        createCoin();
      }, 60000);
      trackedTimeout(() => {
        createFirstAidKit();
        createCoin();
      }, 70000);
      trackedTimeout(() => {
        levelText.innerHTML = "Level 5";
        createCoin();
      }, 80000);
      trackedTimeout(() => {
        createFirstAidKit();
        createCoin();
      }, 90000);
      trackedTimeout(() => {
        levelText.innerHTML = "Level 6";
      }, 100000);
    }
    function gameLoop() {
      if (!gamePaused) {
        updateFullScreenMap();
        gameLoopId = requestAnimationFrame(gameLoop);
      }
    }
    resumeMonsterMovement();
    gameLoop();
    const inventory = document.getElementById("inventory");
    let isInvOpen = false;
    document.addEventListener("keydown", (event) => {
      if (event.key === "i") {
        if (!isInvOpen) {
          inventory.style.display = "block";
          pauseGame();
          isInvOpen = true;
        }
      } else if (event.key === "b") {
        if (isInvOpen) {
          inventory.style.display = "none";
          resumeGame();
          isInvOpen = false;
        }
      }
    });
    function createMushroom(x, y) {
      const mushroom = document.createElement("div");
      mushroom.classList.add("mushroom");
      mushroom.style.position = "absolute";
      mushroom.style.top = `${y}px`;
      mushroom.style.left = `${x}px`;
      const cap = document.createElement("div");
      cap.classList.add("cap");
      mushroom.appendChild(cap);
      const stem = document.createElement("div");
      stem.classList.add("stem");
      mushroom.appendChild(stem);
      const spot1 = document.createElement("div");
      spot1.classList.add("spot", "one");
      cap.appendChild(spot1);
      const spot2 = document.createElement("div");
      spot2.classList.add("spot", "two");
      cap.appendChild(spot2);
      const spot3 = document.createElement("div");
      spot3.classList.add("spot", "three");
      cap.appendChild(spot3);
      document.getElementById("game-container").appendChild(mushroom);
    }
    function generateMushrooms() {
      const positions = [
        { x: 100, y: 200 },
        { x: 1200, y: 200 },
        { x: 500, y: 100 },
        { x: 1000, y: 600 },
      ];
      positions.forEach((pos) => {
        createMushroom(pos.x, pos.y);
      });
    }
    generateMushrooms();
    function createRock(x, y) {
      const rock = document.createElement("div");
      rock.classList.add("rock");
      rock.style.position = "absolute";
      rock.style.top = `${y}px`;
      rock.style.left = `${x}px`;
      const rockShape = document.createElement("div");
      rockShape.classList.add("rock-shape");
      rock.appendChild(rockShape);
      document.getElementById("game-container").appendChild(rock);
    }
    function generateRocks() {
      const rockPositions = [
        { x: 150, y: 300 },
        { x: 400, y: 500 },
        { x: 600, y: 200 },
        { x: 800, y: 400 },
      ];
      rockPositions.forEach((pos) => {
        createRock(pos.x, pos.y);
      });
    }
    generateRocks();
    let inventoryItems = [];

    function updateInventory() {
      const inventoryGrid = document.querySelector(".inventory-grid");
      inventoryGrid.innerHTML = "";
      const itemCounts = inventoryItems.reduce((acc, item) => {
        acc[item] = (acc[item] || 0) + 1;
        return acc;
      }, {});
      Object.keys(itemCounts).forEach((item) => {
        const slot = document.createElement("div");
        slot.classList.add("inventory-slot");
        slot.style.position = "relative";
        const itemDiv = document.createElement("div");
        itemDiv.classList.add("inventory-item");
        if (item === "coin") {
          const coin = document.createElement("div");
          coin.style.background = "yellow";
          coin.style.position = "relative";
          coin.style.width = "50px";
          coin.style.height = "50px";
          coin.style.borderRadius = "50%";
          coin.style.border = "1px solid black";
          const star = document.createElement("div");
          star.style.position = "absolute";
          star.style.top = "50%";
          star.style.left = "50%";
          star.style.transform = "translate(-50%, -50%)";
          star.style.width = "35px";
          star.style.height = "35px";
          star.style.background = "orange";
          star.style.clipPath =
            "polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)";
          star.style.zIndex = "2";
          coin.appendChild(star);
          itemDiv.appendChild(coin);
          if (itemCounts[item] > 1) {
            const countLabel = document.createElement("div");
            countLabel.textContent = `x${itemCounts[item]}`;
            countLabel.style.position = "absolute";
            countLabel.style.bottom = "5px";
            countLabel.style.right = "5px";
            countLabel.style.fontSize = "16px";
            countLabel.style.color = "#fff";
            countLabel.style.textShadow = "1px 1px 2px rgba(0, 0, 0, 0.5)";
            itemDiv.appendChild(countLabel);
          }
        }
        if (item === "first-aid-kit") {
          const firstAidKit = document.createElement("div");
          firstAidKit.style.background = "white";
          firstAidKit.style.position = "relative";
          firstAidKit.style.width = "60px";
          firstAidKit.style.height = "45px";
          firstAidKit.style.border = "1px solid black";
          firstAidKit.style.borderRadius = "5px";
          const cross = document.createElement("div");
          cross.style.position = "absolute";
          cross.style.background = "red";
          cross.style.width = "30px";
          cross.style.height = "30px";
          cross.style.left = "50%";
          cross.style.top = "50%";
          cross.style.transform = "translate(-50%, -50%)";
          cross.style.clipPath =
            "polygon(30% 0%, 70% 0%, 70% 30%, 100% 30%, 100% 70%, 70% 70%, 70% 100%, 30% 100%, 30% 70%, 0% 70%, 0% 30%, 30% 30%)";
          firstAidKit.appendChild(cross);
          itemDiv.appendChild(firstAidKit);
          if (itemCounts[item] > 1) {
            const countLabel = document.createElement("div");
            countLabel.textContent = `x${itemCounts[item]}`;
            countLabel.style.position = "absolute";
            countLabel.style.bottom = "5px";
            countLabel.style.right = "5px";
            countLabel.style.fontSize = "16px";
            countLabel.style.color = "#fff";
            countLabel.style.textShadow = "1px 1px 2px rgba(0, 0, 0, 0.5)";
            itemDiv.appendChild(countLabel);
          }
        }
        slot.appendChild(itemDiv);
        inventoryGrid.appendChild(slot);
      });
    }
    function collectCoin() {
      inventoryItems.push("coin");
      updateInventory();
    }
    function collectFirstAidKit() {
      inventoryItems.push("first-aid-kit");
      updateInventory();
    }
  </script>
  <script>
    const actionButtonContainer = document.createElement("div");
    actionButtonContainer.id = "actionButtonContainer";
    document.body.appendChild(actionButtonContainer);
    const actionButtons = [];
    const buttonLabels = ["Eat", "Hold", "Drop"];
    for (let i = 0; i < 3; i++) {
      const button = document.createElement("button");
      button.textContent = buttonLabels[i];
      button.classList.add("action-button");
      actionButtonContainer.appendChild(button);
      actionButtons.push(button);
    }
    function positionActionButtons(itemElement) {
      const itemRect = itemElement.getBoundingClientRect();
      const containerHeight = itemRect.height;
      actionButtonContainer.style.left = `${
        itemRect.left + window.scrollX + itemRect.width / 2 - 60
      }px`;
      actionButtonContainer.style.top = `${
        itemRect.top + window.scrollY + containerHeight * 0.5 - 70
      }px`;
      actionButtonContainer.style.display = "block";
    }
    function hideActionButtons() {
      actionButtonContainer.style.display = "none";
    }
    const inventoryGrid = document.querySelector(".inventory-grid");
    inventoryGrid.addEventListener("mouseover", (event) => {
      const hoveredItem = event.target.closest(".inventory-slot");
      if (hoveredItem) {
        positionActionButtons(hoveredItem);
      }
    });
    inventoryGrid.addEventListener("mouseout", (event) => {
      const hoveredItem = event.target.closest(".inventory-slot");
      if (hoveredItem) {
        hideActionButtons();
      }
    });
    document.querySelectorAll(".inventory-item").forEach((itemElement) => {
      itemElement.addEventListener("mouseover", () =>
        positionActionButtons(itemElement)
      );
      itemElement.addEventListener("mouseout", () => hideActionButtons());
    });
  </script>
</html>
